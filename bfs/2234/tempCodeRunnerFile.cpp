if (ny < 0 || row >= ny || nx < 0 || nx >= ny) {
                continue;
            }